:root {
  --bg-color: hsl(0, 0%, 17%);
  --panel-color: #162D42;
  --button-bg: #70add6;
  --button-selected: #00cfff;
  --button-text: #fff;
  --input-bg: #8ed4ffa4;
  --input-text: #fff;
  --text-color: #eee;
  --select-linha: #328fce;
  --highlight: #8ED4FF;
  --border-radius: 6px;
  --key-w: 75px;
  --key-h: 33.75px;
  --gap-vertical: 8px;
  --gap-horizontal: 14px;
  --compound-gap: 3px;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
  background: var(--bg-color);
  color: var(--text-color);
  padding: 10px;
  text-align: center;
}

#app-grid {
  display: grid;
  grid-template-areas: "video controls" "keyboard numpad";
  grid-template-columns: auto 360px;
  gap: 12px 18px;
  justify-items: center;
  align-items: start;
}

#video-container {
  grid-area: video;
  position: relative;
  width: 420px;
  height: 260px;
  background: #000;
  border-radius: var(--border-radius);
  overflow: hidden;
}

#videoEl,
#overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

#controls {
  grid-area: controls;
  background: var(--panel-color);
  padding: 12px;
  border-radius: var(--border-radius);
  box-shadow: 0 0 5px rgba(0, 0, 0, .3);
  width: 360px;
}

#controls h2 {
  margin-bottom: 12px;
  font-size: 1.15em;
  text-align: left;
}

.config-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.config-group {
  display: flex;
  flex-direction: column;
  text-align: left;
}

.config-buttons {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--input-bg);
  padding: 6px 10px;
  border-radius: 6px;
}

.config-buttons button {
  background: var(--button-bg);
  color: var(--button-text);
  border: none;
  border-radius: 4px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: .9em;
}

.config-buttons button:hover {
  background: var(--highlight);
}

/* keyboard panel */
#keyboard-panel {
  grid-area: keyboard;
  background: var(--panel-color);
  padding: 10px;
  border-radius: var(--border-radius);
  border: 2px solid #0a2340;
  width: calc((var(--key-w) * 6) + (var(--gap-horizontal) * 5) + 40px);
}

#output {
  width: 100%;
  padding: 8px;
  font-size: 1em;
  margin-bottom: 10px;
  background: var(--input-bg);
  color: var(--input-text);
  border: none;
  border-radius: 6px;
}

.grid-6cols {
  display: grid;
  grid-template-columns: repeat(6, var(--key-w));
  grid-auto-rows: var(--key-h);
  column-gap: var(--gap-horizontal);
  row-gap: var(--gap-vertical);
  justify-content: center;
}

#numpad-panel {
  grid-area: numpad;
  background: var(--panel-color);
  padding: 10px;
  border-radius: var(--border-radius);
  border: 2px solid #0a2340;
  width: 300px;
}

.grid-3cols {
  display: grid;
  grid-template-columns: repeat(3, var(--key-w));
  grid-auto-rows: var(--key-h);
  column-gap: var(--gap-horizontal);
  row-gap: var(--gap-vertical);
  justify-content: center;
}

/* botão célula inteira */
#keyboard>button,
#numpad>button {
  width: 100%;
  height: 100%;
  min-width: var(--key-w);
  min-height: var(--key-h);
  background: var(--button-bg);
  border: none;
  border-radius: 8px;
  font-size: 1em;
  font-weight: 700;
  color: #000;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform .06s ease;
}

/* wrapper compound (não pinta por si só para não criar "fundo escondido") */
.compound-cell {
  width: 100%;
  height: 100%;
  min-width: var(--key-w);
  min-height: var(--key-h);
  background: transparent;
  border: none;
  border-radius: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform .06s ease;
}

/* hover */
#keyboard>button:hover,
#numpad>button:hover,
#keyboard>.compound-cell .half-btn:hover {
  transform: translateY(-2px);
}

/* selected / key-special (padrão) */
#keyboard>button.selected,
#keyboard .key-special.selected {
  background: var(--button-selected);
  color: #000;
}

#keyboard>button.key-special,
#numpad>button.key-special,
#keyboard .compound-cell .half-btn.key-special {
  background: #97ecff;
  color: #000;
}

/* row highlight — botoes inteiros (aplica direto aos botões normais) */
#keyboard>button.row-selected {
  background: var(--select-linha) !important;
  color: #000;
}


/* coluna/seleção interna do half (quando column cycling seleciona um half) */
#keyboard .compound-cell .half-btn.selected {
  background: var(--button-selected) !important;
  color: #000 !important;
}

/* layout compound / half-btn */
.compound-cell {
  display: flex;
  flex-direction: row;
  gap: var(--compound-gap);
  width: 100%;
  height: 100%;
  align-items: stretch;
  justify-content: center;
  padding: 0;
  box-sizing: border-box;
}

.compound-cell .half-btn {
  flex: 1 1 0;
  min-width: 0;
  min-height: 0;
  width: 50%;
  height: 100%;
  border-radius: 6px;
  border: none;
  background: var(--button-bg);
  color: #000;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0 6px;
}

/* ícones */
.btn-icon {
  width: 1.15em;
  height: 1.15em;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-icon.space-icon {
  width: 1.9em;
  height: 1.9em;
}

.btn-icon svg {
  width: 100%;
  height: 100%;
  display: block;
}

.btn-icon:not(.preserve) svg {
  fill: currentColor;
  stroke: currentColor;
}

/* numpad: mantém ícone/texto preto mesmo quando selecionado */
#numpad>button.selected {
  background: var(--button-selected) !important;
  color: #000 !important;
}

#numpad>button.selected .btn-icon {
  color: inherit !important;
}

/* icon-only config */
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 6px 8px;
}

#piscas {
  margin-top: 15px;
  font-size: 18px;
  color: var(--highlight);
  font-weight: bold;
  grid-column: 1/-1;
  text-align: center;
}

#keyboard .compound-cell.row-selected>.half-btn {
  background: var(--select-linha) !important;
  color: #000 !important;
}